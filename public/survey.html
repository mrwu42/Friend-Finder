<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>FriendFinder</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <script
    src="https://code.jquery.com/jquery-3.4.1.js"
    integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
    crossorigin="anonymous"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
</head>

<body>
    <div class="container">
        <h2>Survey Questions</h2>
        <hr>
        <h3><strong>About You</strong></h3>
        <p>Please answer all questions to the best of your ability.</p>
        <h4>Name (Required)</h4>
        <input type="text" name="" id="name" class="form-control" required>
        <hr>
        <section id="friend-form">
            <section class="form-group">
                <h3>Question 1</h3>
                <label for="item1" class="control-label">
                    Your mind is always buzzing with unexplored ideas and plans.
                </label>
                <div>
                    <select class="form-control" id="item1">
                        <option value="" selected disabled>Choose</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>
            </section>
            <section class="form-group">
                <h3>Question 2</h3>
                <label for="item2" class="control-label">
                    Generally speaking, you rely more on your experience than your imagination.
                </label>
                <div>
                    <select class="form-control" id="item2">
                        <option value="" selected disabled>Choose</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>
            </section>
            <section class="form-group">
                <h3>Question 3</h3>
                <label for="item3" class="control-label">
                    You find it easy to stay relaxed and focused even when there is some pressure.
                </label>
                <div>
                    <select class="form-control" id="item3">
                        <option value="" selected disabled>Choose</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>
            </section>
            <section class="form-group">
                <h3>Question 4</h3>
                <label for="item4" class="control-label">
                    You rarely do something just out of sheer curiosity.
                </label>
                <div>
                    <select class="form-control" id="item4">
                        <option value="" selected disabled>Choose</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>
            </section>
            <section class="form-group">
                <h3>Question 5</h3>
                <label for="item5" class="control-label">
                    People can rarely upset you.
                </label>
                <div>
                    <select class="form-control" id="item5">
                        <option value="" selected disabled>Choose</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>
            </section>
            <section class="form-group">
                <h3>Question 6</h3>
                <label for="item6" class="control-label">
                    It is often difficult for you to relate to other people’s feelings.
                </label>
                <div>
                    <select class="form-control" id="item6">
                        <option value="" selected disabled>Choose</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>
            </section>
            <section class="form-group">
                <h3>Question 7</h3>
                <label for="item7" class="control-label">
                    In a discussion, truth should be more important than people’s sensitivities.
                </label>
                <div>
                    <select class="form-control" id="item7">
                        <option value="" selected disabled>Choose</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>
            </section>
            <section class="form-group">
                <h3>Question 8</h3>
                <label for="item8" class="control-label">
                    You rarely get carried away by fantasies and ideas.
                </label>
                <div>
                    <select class="form-control" id="item8">
                        <option value="" selected disabled>Choose</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>
            </section>
            <section class="form-group">
                <h3>Question 9</h3>
                <label for="item9" class="control-label">
                    You think that everyone’s views should be respected regardless of whether they are supported by facts or not.
                </label>
                <div>
                    <select class="form-control" id="item9">
                        <option value="" selected disabled>Choose</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>
            </section>
            <section class="form-group">
                <h3>Question 10</h3>
                <label for="item10" class="control-label">
                    You feel more energetic after spending time with a group of people.
                </label>
                <div>
                    <select class="form-control" id="item10">
                        <option value="" selected disabled>Choose</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>
            </section>
        </section>
        <!-- Modal -->
        <div class="modal">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title"></h4>
                    </div>
                    <div class="modal-body text-center">
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
        <button type="button" class="btn btn-danger btn-lg btn-block" id="submit">Submit</button>
        <br>
    		<a href="home.html">
            <button type="button" class="btn btn-primary">
                Return Home
            </button>
        </a>
    </div>
    <script type="text/javascript">
        // Listener for submit button click
        $('#submit').on('click', function(event) {
                // prevents the default submit button action
            event.preventDefault();
            // Set local variables
            var matchStatus = $('.modal-title');
            var modalBody = $('.modal-body');
            // set responses to local variables
            var name = $('#name').val().trim();
            var item1 = parseInt($('#item1').val());
            var item2 = parseInt($('#item2').val());
            var item3 = parseInt($('#item3').val());
            var item4 = parseInt($('#item4').val());
            var item5 = parseInt($('#item5').val());
            var item6 = parseInt($('#item6').val());
            var item7 = parseInt($('#item7').val());
            var item8 = parseInt($('#item8').val());
            var item9 = parseInt($('#item9').val());
            var item10 = parseInt($('#item10').val());
    
            // Set data to be sent to server
            var userData = {
                name: name,
                scores: [
                    item1,
                    item2,
                    item3,
                    item4,
                    item5,
                    item6,
                    item7,
                    item8,
                    item9,
                    item10
                ]
            };
    
            // If responses are valid...
            if (
                (name !== '') && (!isNaN(item1)) &&
                (!isNaN(item2)) && (!isNaN(item3)) && (!isNaN(item4)) &&
                (!isNaN(item5)) && (!isNaN(item6)) && (!isNaN(item7)) &&
                (!isNaN(item8)) && (!isNaN(item9)) && (!isNaN(item10))
            ) {
                // Grab the URL of the website
                var currentURL = 'https://'+window.location.origin;
    
                // AJAX post the data to the friends API. 
                $.post(currentURL + "/api/friends", userData, function(data) {
                        // If the data has a match, then show this
                    if (data.name !== undefined) {
                        matchStatus.html('Your match...');
                        modalBody.html('<p>...is ' + data.name + '!</p>');
                    } else {
                        // If no match, show this
                        matchStatus.html('Not enough data!');
                        modalBody.html('<p>Unfortunately there is not yet enough user data to match you</p>');
                    }
    
                    // Toggle modal on
                    $('.modal').modal('toggle');
    
                });
            } else {
                    // If the form was not valid, this error is shown
                matchStatus.html('Error...');
                modalBody.html('Please answer all questions on the form.');
                // Toggle modal on
                $('.modal').modal('toggle');
            }
        });
    
        // document.getElementById('#friend-form').reset();
        </script>
    </body>